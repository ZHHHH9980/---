# AJAX

[AJAX]:  Async Javascript And Xml 异步的JS和XML

在ajax中的异步不是我们理解的同步异步编程，而是泛指“局部刷新”，但是我们在以后的AJAX请求中尽可能使用异步获取数据（因为异步数据获取不会**阻塞**下面代码的执行）



[XML]: 可扩展标记语言（类似HTML的标记语言）	"MDN"

MDN：

> XML (Extensible Markup Language) 是一种类似于  [HTML](https://developer.mozilla.org/zh-CN/docs/Glossary/HTML) 的标记语言，但是 XML 没有使用预定义的标记。因此，您可以根据**自己的设计需求定义专属于您的标记。这是一种十分有用的可存储、可搜索和可共享的格式存储数据的方法**。最重要的是，因为 XML 的基本格式是标准化的，所以如果您跨系统或平台共享或传输 XML ，无论是在本地还是在互联网上，接收方仍然可以根据标准化的 XML 语法解析数据。

简而言之：可扩展标记语言，作用是用自己扩展的一些语义标签来存储一些数据和内容。



### XML的由来

AJAX刚刚兴起的时候，为了清晰表达数据结构，服务端响应客户端的数据都是XML格式。

```xml
<?xml version="1.0" encoding="UTF-8"?>
<person>
    <name>
         zh
    </name>
    <age>28</age>
    <height>180</height>
</person>
```



但现在一部分项目都用json格式传输数据，因为json也能清晰表达数据结构，而且访问和操作数据更方便。

```javascript
[
    {
        "name": "zh",
        "age": 28,
        "height": 180
    }
]
```



## 局部刷新和全局刷新



### 全局刷新

>  页面是**服务端渲染**的（前后端不分离）



#### 客户端

http://www.xxx.com/document/index.html

按下回车

---》

#### 服务端

1.首先获取document/index.html资源的内容

2.从服务器中获取需要展示的数据

3.把数据和获取的源代码进行拼接处理（处理好的字符串中有结构和数据）

4.把处理好的XML格式返回给客户端

---》

#### 客户端

客户端拿到源码后只需要渲染即可。



### 服务端渲染的好处

1. 有利于SEO优化（服务器端渲染好的内容拿到客户端呈现，在页面中代码可以看到绑定的内容，有利于搜索引擎的收录）

2. 服务端渲染解决了一个非常关键的性能问题——首屏加载速度过慢。



### 服务端渲染的应用场景

打眼一看，这个服务端渲染给浏览器省了这么多事儿，性能肯定是质的飞跃啊！喜闻乐见！但是大家打开自己经常访问的那些网页看一看，会发现仍然有许多网站压根儿不用服务端渲染——看来这个东西也不是万能的。

根据我们前面的描述，不难看出，服务端渲染本质上是**本该浏览器做的事情，分担给服务器去做**。这样当资源抵达浏览器时，它呈现的速度就快了。乍一看好像很合理：浏览器性能毕竟有限，服务器多牛逼！能者多劳，就该让服务器多干点活！

但仔细想想，在这个网民遍地的时代，几乎有多少个用户就有多少台浏览器。用户拥有的浏览器总量多到数不清，那么一个公司的服务器又有多少台呢？我们把这么多台浏览器的渲染压力集中起来，分散给相比之下数量并不多的服务器，服务器肯定是承受不住的。

这样分析下来，服务端渲染也并非万全之策。在实践中，我一般会建议大家先忘记服务端渲染这个事情——**服务器稀少而宝贵，但首屏渲染体验和 SEO 的优化方案却很多**——我们最好先把能用的低成本“大招”都用完。除非网页对性能要求太高了，以至于所有的招式都用完了，性能表现还是不尽人意，这时候我们就可以考虑向老板多申请几台服务器，把服务端渲染搞起来了~



## 局部刷新

考虑以下场景：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200806210521260.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pIZ29nb2dvaGE=,size_16,color_FFFFFF,t_70)

当我们输入完账号密码，点击登录，如果不使用AJAX，而是用?传参的形式像服务器发送请求，**服务器响应数据，以后会进行全局刷新**，而且仅仅局部的地方发送请求，就要刷新整个页面，非常浪费资源。



### AJAX的作用

ajax的诞生就是为了实现局部刷新。

我们点击登录按钮直接基于ajax向服务器发送请求，客户端使用JS把获取到的数据直接替换原有的数据。